{% extends "gold_loan/base.html" %}
{% load static %}

{% block title %}Verify Closure OTP - {{ loan.loan_number }}{% endblock %}

{% block head %}
<link rel="stylesheet" href="{% static 'gold_loan/css/loan_close.css' %}">
{% endblock %}

{% block content %}
<div class="close-container">
    <div class="close-header">
        <h2 style="margin: 0; color: #111;">Verify OTP</h2>
        <div style="color: #666; margin-top: 5px;">{{ loan.loan_number }}</div>
    </div>

    <div style="margin: 20px 0; color: #4b5563;">
        An OTP has been sent to the customer's mobile and admin.
        <br>
        <strong>(Mock OTP: 123456)</strong>
    </div>

    {% if error %}
    <div class="warning-box" style="margin-bottom: 20px;">
        {{ error }}
    </div>
    {% endif %}

    <form method="POST">
        {% csrf_token %}
        <input type="hidden" name="next_action" value="{{ next_action|default:'close' }}">
        <div style="margin-bottom: 20px;">
            <input type="text" name="otp" placeholder="Enter 6-digit OTP"
                style="padding: 10px; width: 100%; border: 1px solid #d1d5db; border-radius: 6px; font-size: 16px; letter-spacing: 2px; text-align: center;">
        </div>

        <button type="submit" class="btn-close">Verify & Proceed</button>
    </form>


    <div style="margin-top: 24px; border-top: 1px solid #f1f5f9; padding-top: 16px;">
        <a href="{% url 'gold_loan:loan_close_action' loan.id %}" class="btn-cancel"
            style="display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; margin: 0; background: #f8fafc; border: 1px solid #e2e8f0; color: #64748b; font-weight: 700; text-decoration: none; padding: 12px 20px; border-radius: 12px; transition: all 0.2s;">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                stroke-linecap="round" stroke-linejoin="round">
                <line x1="19" y1="12" x2="5" y2="12"></line>
                <polyline points="12 19 5 12 12 5"></polyline>
            </svg>
            Back to Closure Overview
        </a>
    </div>
</div>

{% endblock %}